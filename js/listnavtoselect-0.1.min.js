/**
 * listNavToSelect - converts a list navigation into a select field
 * 
 * 2012 by Christian Doebler <info@christian-doebler.net>
 * 
 * Copyright 2012
 * licensed under the MIT License
 * Do not remove this copyright notice
 * 
 * Thanks,
 * Christian
 */(function(a){var b={dataPrefix:"listNavToSelect.",settings:!1,select:!1,init:function(c,d){b.settings=d,a(c).each(function(){var c=b.getHref(),e=a(this),f=a(document.createElement("select"));b.setData(f,"list",e),a(d.anchor_selector,this).each(function(){var c=a(this),e=c.parents("li:first"),g=a(this).attr("target"),h=this.href,i=a(document.createElement("option"));b.setData(i,"li",e),g=="_blank"&&(b.setData(i,"target",g),d.class_target_blank!==!1&&!i.hasClass(d.class_target_blank)&&i.addClass(d.class_target_blank));var j=e.hasClass(d.class_list_active);j&&(f.val(h),i.attr("selected","selected"),b.setData(f,"href",h),b.setData(f,"active_li",e)),i.appendTo(f).val(h).html(c.html()),c.click(function(){if(g!="_blank"){var a=b.getData(f,"active_li");a.removeClass(d.class_list_active),b.selectOption(h,f),e.addClass(d.class_list_active),b.updateSelect(f)}})}),f.change(function(){b.updateSelect(a(this))}),d.hide_list&&e.hide(),d.container_selector!==!1?a(d.container_selector).append(f):f.insertBefore(e),b.select=f})},updateSelect:function(a){var c=a.find(":selected"),d=b.getData(c,"target"),e=c.val();d=="_blank"?(window.open(e),e=b.getData(a,"href"),b.selectOption(e)):(window.location.href=e,b.setData(a,"href",e),b.updateLi(a,c))},updateLi:function(a,c){c===undefined&&(c=a.find(":selected"));var d=b.settings,e=b.getData(a,"active_li"),f=b.getData(c,"li");e.removeClass(d.class_list_active),f.addClass(d.class_list_active),b.setData(a,"active_li",f)},selectOption:function(c,d){d===undefined&&(d=b.select),d.val(c),d.find("option").each(function(){var b=a(this),d=b.val();d==c?b.attr("selected","selected"):b.removeAttr("selected")})},getHref:function(){return window.location.href},setData:function(a,c,d){return a.data(b.datarefix+c,d)},getData:function(a,c){return a.data(b.datarefix+c)}};a.fn.listNavToSelect=function(c,d,e){c===undefined&&(c="init"),e===undefined&&typeof d=="object"&&(e=d),typeof c=="object"&&(e=c,c="init");var f=a.extend({container_selector:!1,anchor_selector:"li a",class_target_blank:!1,class_list_active:"active",hide_list:!0},e);return b[c]!==undefined?b[c](this,f):console.log("Method "+c+" not defined in listNavToSelect!"),this.each(function(){var b=a(this)})}})(jQuery);