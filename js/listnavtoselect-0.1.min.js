/**
 * listNavToSelect - converts a list navigation into a select field
 * 
 * 2012 by Christian Doebler <info@christian-doebler.net>
 * 
 * Copyright 2012
 * licensed under the MIT License
 * Do not remove this copyright notice
 * 
 * Thanks,
 * Christian
 */(function(a){var b={dataPrefix:"listNavToSelect.",settings:!1,select:!1,init:function(c,d){b.settings=d,a(c).each(function(){var c=b.getHref(),e=a(this),f=a(document.createElement("select"));b.setData(f,"list",e),a(d.anchor_selector,this).each(function(){var c=a(this),g=c.parents("li:first"),h=a(this).attr("target"),i=this.href,j=a(document.createElement("option"));b.setData(j,"a",c),h=="_blank"&&(b.setData(j,"target",h),d.class_target_blank!==!1&&!j.hasClass(d.class_target_blank)&&j.addClass(d.class_target_blank));var k=g.hasClass(d.class_list_active);k&&(f.val(i),j.attr("selected","selected"),b.setData(f,"href",i));var l=g.parents("li").length,m=b.getLabelPrefix(l)+c.html();j.appendTo(f).val(i).html(m),c.click(function(){h!="_blank"&&(e.find("li").removeClass(d.class_list_active),g.addClass(d.class_list_active),b.selectOption(i,f),b.updateSelect(f))})}),f.change(function(){b.updateSelect(a(this))}),d.hide_list&&e.hide(),d.container_selector!==!1?a(d.container_selector).append(f):f.insertBefore(e),b.select=f})},updateSelect:function(a){var c=a.find(":selected"),d=b.getData(c,"target"),e=c.val();d=="_blank"?(window.open(e),e=b.getData(a,"href"),b.selectOption(e)):(window.location.href=e,b.setData(a,"href",e),b.updateList(a,c))},updateList:function(c,d){var e=b.settings;d===undefined&&(d=c.find(":selected"));var f=b.getData(c,"list"),g=b.getData(d,"a"),h=g.parents("li:first");f.find("li").removeClass(e.class_list_active),h.addClass(e.class_list_active),h.parents("li").each(function(){a(this).addClass(e.class_list_active)})},selectOption:function(c,d){d===undefined&&(d=b.select),d.val(c),d.find("option").each(function(){var b=a(this),d=b.val();d==c?b.attr("selected","selected"):b.removeAttr("selected")})},getHref:function(){return window.location.href},setData:function(a,c,d){return a.data(b.datarefix+c,d)},getData:function(a,c){return a.data(b.datarefix+c)},getLabelPrefix:function(a){var c="";for(var d=0;d<a;d++)c+=b.settings.sub_options_indent;return c}};a.fn.listNavToSelect=function(c,d,e){c===undefined&&(c="init"),e===undefined&&typeof d=="object"&&(e=d),typeof c=="object"&&(e=c,c="init");var f=a.extend({container_selector:!1,anchor_selector:"li a",class_target_blank:!1,class_list_active:"active",sub_options_indent:"&nbsp;&nbsp;",hide_list:!0},e);return b[c]!==undefined?b[c](this,f):console.log("Method "+c+" not defined in listNavToSelect!"),this.each(function(){var b=a(this)})}})(jQuery);